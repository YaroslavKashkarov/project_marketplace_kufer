<div class="container" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
  <div class="control" [class.open]="isExpanded">
    <div class="search">
      <div class="icon">
        <svg
          fill="none"
          height="24"
          viewBox="0 0 25 24"
          width="25"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            clip-rule="evenodd"
            d="M20.6043 7.66945C19.1781 4.24481 15.8364 2.01016 12.1267 2.00025C8.12848 1.9792 4.57338 4.54018 3.32706 8.33922C2.08074 12.1383 3.42792 16.3075 6.6616 18.6589C9.89528 21.0104 14.2768 21.0069 17.5067 18.6503L20.3867 21.5303C20.6795 21.8227 21.1539 21.8227 21.4467 21.5303C21.7391 21.2374 21.7391 20.7631 21.4467 20.4703L18.6567 17.6803C21.2628 15.0401 22.0305 11.0941 20.6043 7.66945ZM19.2671 14.1692C18.0696 17.0549 15.2509 18.9343 12.1267 18.9303V18.8903C7.88639 18.8848 4.44414 15.4605 4.41668 11.2203C4.41263 8.09599 6.29207 5.27729 9.17774 4.07982C12.0634 2.88235 15.3863 3.5422 17.5955 5.75139C19.8047 7.96058 20.4646 11.2835 19.2671 14.1692Z"
            fill="#070A0F"
            fill-opacity="0.5"
            fill-rule="evenodd"
          />
        </svg>
      </div>
      <input
        type="text"
        (blur)="onBlur()"
        (focus)="onFocus()"
        placeholder="Search"
        [formControl]="searchInput"
      />
    </div>
    <div class="filter" *ngIf="!isSearchResultPage" (click)="openFilter($event)">
      <div class="icon">
        <svg
          fill="none"
          height="24"
          viewBox="0 0 25 24"
          width="25"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            clip-rule="evenodd"
            d="M14.4352 10.6179C15.3361 10.5963 16.141 10.0491 16.4923 9.21925C16.5673 9.25087 16.6475 9.2683 16.7289 9.27067H20.8432C21.2692 9.27067 21.6146 8.92534 21.6146 8.49935C21.6146 8.07336 21.2692 7.72802 20.8432 7.72802H16.7803C16.7359 7.72221 16.691 7.72221 16.6466 7.72802C16.352 6.57063 15.2183 5.83303 14.0406 6.0325C12.863 6.23197 12.0355 7.30174 12.1386 8.49158C12.2416 9.68142 13.2407 10.593 14.4352 10.5871V10.6179ZM14.4352 7.58404C14.8498 7.58404 15.186 7.92017 15.186 8.3348C15.186 8.74943 14.8498 9.08556 14.4352 9.08556C14.0205 9.08556 13.6843 8.74943 13.6843 8.3348C13.6843 7.92017 14.0205 7.58404 14.4352 7.58404Z"
            fill="#00478F"
            fill-rule="evenodd"
          />
          <path
            d="M4.43744 7.72802H10.6089C11.0349 7.72802 11.3803 8.07336 11.3803 8.49935C11.3803 8.92534 11.0349 9.27067 10.6089 9.27067H4.43744C4.0114 9.27067 3.66602 8.92534 3.66602 8.49935C3.66602 8.07336 4.0114 7.72802 4.43744 7.72802Z"
            fill="#00478F"
          />
          <path
            clip-rule="evenodd"
            d="M6.40202 15.9555C6.72419 15.0444 7.5852 14.4347 8.55173 14.4334V14.4128C9.71485 14.4114 10.695 15.2806 10.8323 16.4354C10.9697 17.5902 10.2208 18.6651 9.08975 18.9364C7.95872 19.2077 6.80363 18.5896 6.40202 17.4981H4.43744C4.0114 17.4981 3.66602 17.1528 3.66602 16.7268C3.66602 16.3008 4.0114 15.9555 4.43744 15.9555H6.40202ZM7.80211 16.7809C7.80918 17.19 8.14254 17.5181 8.55173 17.5187V17.4776C8.96642 17.4776 9.30259 17.1414 9.30259 16.7268C9.28016 16.3183 8.93472 16.0029 8.5258 16.0177C8.11687 16.0324 7.79505 16.3718 7.80211 16.7809Z"
            fill="#00478F"
            fill-rule="evenodd"
          />
          <path
            d="M12.666 15.9555H20.8946C21.3206 15.9555 21.666 16.3008 21.666 16.7268C21.666 17.1528 21.3206 17.4981 20.8946 17.4981H12.666C12.24 17.4981 11.8946 17.1528 11.8946 16.7268C11.8946 16.3008 12.24 15.9555 12.666 15.9555Z"
            fill="#00478F"
          />
        </svg>
      </div>
    </div>

    <div class="close" *ngIf="isSearchResultPage" (click)="clearInput()">
      <div class="icon">
        <svg
          width="15"
          height="14"
          viewBox="0 0 15 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.29086 6.75604L13.9875 1.07867C14.2255 0.838429 14.2255 0.449247 13.9875 0.20901C13.7537 -0.0355196 13.3676 -0.0428636 13.1249 0.192602L7.42822 5.86997L1.80481 0.192602C1.68952 0.0696608 1.5291 0 1.36128 0C1.19346 0 1.03305 0.0696608 0.917759 0.192602C0.706741 0.424707 0.706741 0.780926 0.917759 1.01303L6.54117 6.6822L0.844516 12.3514C0.606515 12.5916 0.606515 12.9808 0.844516 13.221C0.957821 13.338 1.11365 13.4032 1.27583 13.4015C1.44114 13.415 1.60503 13.3619 1.73157 13.2538L7.42822 7.57647L13.1249 13.3195C13.2382 13.4365 13.394 13.5017 13.5562 13.5C13.7182 13.5007 13.8737 13.4357 13.9875 13.3195C14.2255 13.0792 14.2255 12.6901 13.9875 12.4498L8.29086 6.75604Z"
            fill="#00478F"
          />
        </svg>
      </div>
    </div>
  </div>

  <ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayHasBackdrop]="true"
    [cdkConnectedOverlayOpen]="isExpanded"
    [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
  >
    <ul class="options-list" *ngIf="options?.length">
      <li
        class="option"
        *ngFor="let option of options"
        (click)="onOptionSelect(option)"
        [innerHTML]="option | highlightKeywords: keywords"
      ></li>
    </ul>
  </ng-template>
</div>
